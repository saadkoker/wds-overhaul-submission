<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>InkLink</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" href="assets/link.png" type="image/x-icon">
  </head>
  <body>
    <div class="navbar">
        <div class="pages">
          <img src="assets/logo.png" alt="logo">
          <a href="index.html">Home</a>
          <a href="pricing.html">Pricing</a>
          <a href="teams.html">For Teams</a>
          <a href="individuals.html">For Individuals</a>
          <a href="mission.html">Mission</a>
        </div>
        <div class="general">
          <a href="help.html">Help</a>
          <a href="login.html">Login</a>
          <a href="download.html" class="btn">Download</a>
        </div>
      </div>
    <div class="main">
        <form class="login_form">
            <input type="username" placeholder="Username...">
            <input type="password" placeholder="Password...">
            <input type="submit" value="Log In">
        </form>
    </div>
  </body>
  <script src="script.js"></script>
  <script>
    let msg = new SpeechSynthesisUtterance();
    let voices = speechSynthesis.getVoices();
    msg.voice = voices[0];
    let tags = document.querySelectorAll('p,a,h1,h2,h3,div,img,span'); // add more tags for your project

    let isTextSpoken = false;

    document.addEventListener('keyup', handleKeyup);

    function handleKeyup(e) {
        if (e.key === 'Enter' && window.getSelection().toString() !== '' && !isTextSpoken) {
            let selectedText = window.getSelection().toString();
            let range = window.getSelection().getRangeAt(0);
            let span = document.createElement('span');
            span.style.backgroundColor = 'yellow';
            span.appendChild(range.extractContents());
            range.deleteContents();
            range.insertNode(span);

            msg.text = selectedText;
            speechSynthesis.speak(msg);

            isTextSpoken = true;

            msg.addEventListener('end', handleSpeechEnd);
        }
    }

    function handleSpeechEnd() {
        // Remove the background color from all spans
        let spans = document.querySelectorAll('span[style="background-color: yellow;"]');
        spans.forEach((span) => {
            span.style.backgroundColor = '';
        });

        isTextSpoken = false;

        msg.removeEventListener('end', handleSpeechEnd);
    }
  </script>
</html>