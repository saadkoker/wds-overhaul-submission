<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>InkLink</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" href="assets/link.png" type="image/x-icon">
  </head>
  <body>
    <div class="navbar2">
      <div class="pages2">
          <a href="#add-file" class="add-button">
              <img src="assets/add-button.png" alt="Add File">
              <img src="assets/three-dots.png" alt="Three Dots">
          <a href="#home"><img src="assets/home-icon.png" alt="Home"></a>
          </a>
      </div>
      <div class="general2">
          <a href="#speak-text"><img src="assets/headphones.png" alt="Text to Speech"></a>
          <a href="#record-text"><img src="assets/zoom.png" alt="Zoom"></a>
          <a href="#record-text"><img src="assets/copy.png" alt="Copy Text"></a>
          <a id= "tts" href="#record-text"><img src="assets/mic.png" alt="Record Text"></a>
          <a href="#back"><img src="assets/back.png" alt="Back"></a>
          <a href="#settings"><img src="assets/settings.png" alt="Settings"></a>
      </div>
    </div>
    <div class="notes_main">
      <div class="sidebar">
        <!-- Top Section -->
        <div class="top-section">
            <img src="assets/files-icon.png" alt="File Icon">
            <span>Files</span>
        </div>

        <!-- Files Section -->
        <div class="files-section">
            <!-- List of Files Goes Here -->
            <ul>
                <li>File 1</li>
                <li>File 2</li>
                <!-- Add more files as needed -->
            </ul>
        </div>

        <!-- Folders Section -->
        <div class="folders-section">
            <!-- List of Folders Goes Here -->
            <ul>
                <li>Folder 1</li>
                <li>Folder 2</li>
                <!-- Add more folders as needed -->
            </ul>
        </div>
    </div>
        <div class="notes">
            <textarea name="writing" cols="30" rows="10" class="writing"></textarea>
        </div>
    </div>
  
    <footer>
      <div class="footer-content">
        <img src="assets/logo.png" alt="Image Description">
        <p>Copyright Â© 2023, Western Developers Society</p>
      </div>
    </footer>
  </body>
  <script defer src="script.js"></script>

    <!-- Add any additional script specific to note.html below -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Retrieve the stored content of the current note from localStorage
            const currentNoteContent = localStorage.getItem('currentNoteContent');

            // Populate the textarea with the content
            const writingTextarea = document.querySelector('.writing');
            writingTextarea.value = currentNoteContent || '';

        });
    </script>

  <script>
    // Your existing code goes here

    let msg = new SpeechSynthesisUtterance();
    let voices = speechSynthesis.getVoices();
    msg.voice = voices[0];
    let isTextSpoken = false;

    document.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && window.getSelection().toString() !== '' && !isTextSpoken) {
            let selectedText = window.getSelection().toString();
            let range = window.getSelection().getRangeAt(0);
            
            // Create a unique identifier for the mark element
            let uniqueId = 'highlight_' + Date.now();
            
            // Create a mark element with a unique class
            let mark = document.createElement('mark');
            mark.className = 'custom-highlight';
            mark.id = uniqueId;
            mark.appendChild(range.extractContents());
            range.insertNode(mark);

            // Speak the selected text
            msg.text = selectedText;
            speechSynthesis.speak(msg);

            isTextSpoken = true;

            msg.addEventListener('end', () => {
                // Remove the mark element after speech
                let highlightedElement = document.getElementById(uniqueId);
                if (highlightedElement) {
                    highlightedElement.outerHTML = highlightedElement.innerHTML;
                }
                isTextSpoken = false;
            });
        }
    });
  </script>
</html>